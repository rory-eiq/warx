# Nodewarx

## Architecture

Each of these should be replacable with out touching other layers (much). Ideally layer should only touch the one below:

1. client (see client architecture in client/README.md)
2. www (http server)
3. app (express)
4. network messages (send and get messages, now socket.io, possibly plain websockets)
5. messages-actions (network-state-glue: translates network messages to redux actions vice versa)
6. game state (redux + redux-observable, possibly mobx or redux + sagas)
7. possibly: data sources

## Modules in state
The state folder is where the business logic lives. This is the largest layer and
is split up in several modules. Each module can export initial state, actions,
reducers, selectors and epics. These modules can be generated by using `plop module`.

## Redux Actions
This application shares some actions between server and client, actions can be
marked as any of these:

- client-to-client actions (i.e. opening a panel)
- client-to-server actions (i.e. connect-request, move request)
- server-to-client actions (i.e. new connection, player moved)
- server-to-server actions: update server state without directly sending to client(s)


## Deployments

### Heroku
1. initialize heroku in the dist folder

```
$ cd my-project/
$ git init
$ heroku git:remote -a {my-heroku-project}
```

2. run `./build.sh` and then `./heroku.sh` from the root project folder

### Now.sh
Run `now` from the dist folder